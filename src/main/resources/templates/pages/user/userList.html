<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8"/>
        <title>userList</title>
        <!--利用thymeleaf表达式获取css路径,bootstrap给button提供样式-->
        <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet" />
        <script type="text/javascript" th:src="@{/js/jquery3.js}"></script>
    </head>

    <body class="container">
        <div><br/></div>

        <div>
            <div>
                <button id="xlsx_down_button" class="btn btn-success">接口文档下载</button>
            </div>
        </div>

        <div><br/></div>

        <!--    用户名称输入框    -->
        <div class="col-lg-6">
            <div class="input-group">
                <input type="text" id="userNameSearchInput" class="form-control" placeholder="目前只能输入用户名称进行查询，按回车键搜索">
                <span class="input-group-btn">
                    <button class="btn" id="userNameSearchButton" type="button">查询</button>
                </span>
            </div>
        </div>

        <div><br/></div>
        <div>
            <table class="table table-hover">
                <tr>
                    <th width="100">用户id</th>
                    <th width="100">用户名</th>
                    <th width="100">年龄</th>
                    <th width="100">性别</th>
                    <th width="200">操作</th>
                </tr>
                <!-- 遍历list数据 -->
                <tr th:each="user:${list}">
                    <th th:text="${user.id}"></th>
                    <th th:text="${user.name}"></th>
                    <th th:text="${user.age}"></th>
                    <th th:if="${user.sex}=='1'">男</th>
                    <th th:if="${user.sex}=='0'">女</th>
                    <th>
                        <button type="button" class="btn btn-primary btn-sm">修改</button>
                        <button type="button" class="btn btn-danger btn-sm">删除</button>
                    </th>
                </tr>
            </table>
            <div th:align="center" th:if="${#lists.isEmpty(list)}"><font style="color: #0a53be">没有查询到数据</font></div>
        </div>
    </body>

    <script>

        // 点击接口文档下载按键后触发方法
        $("#xlsx_down_button").click(function (){
            window.location.href = "/file/download";
        })

        // 输入用户名点击搜索
        $("#userNameSearchButton").click(function (){
            let userNameToSearch = $("#userNameSearchInput").val();
            searchUserByName(userNameToSearch)
        })

        //  为输入框添加绑定事件，按下回车搜索用户
        $("#userNameSearchInput").bind('keypress', function (event) {
            //  获取用户输入框中的值
            let userNameToSearch = $("#userNameSearchInput").val();
            //  当键码的值为13时也就意味着是回车，执行控制层方法
            if (event.keyCode == '13') {
                searchUserByName(userNameToSearch)
            }
        })

        // 搜索用户
        function searchUserByName(userName){
            window.location.href = "/user/list?name="+userName;
        }
    </script>
</html>

